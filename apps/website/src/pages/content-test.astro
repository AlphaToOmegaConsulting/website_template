---
import { getCollection } from 'astro:content';

// Test TypeScript autocompletion and type safety
const pages = await getCollection('pages');
const sections = await getCollection('sections');
const events = await getCollection('events');

// Filter to get only French events
const frenchEvents = await getCollection('events', ({ data }) => {
  return data.lang === 'fr';
});
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Content Collections Test</title>
  </head>
  <body>
    <h1>Content Collections Test</h1>
    
    <section>
      <h2>Pages ({pages.length})</h2>
      <ul>
        {pages.map((page) => (
          <li>
            {page.data.title} ({page.data.lang}) - {page.data.publishDate.toLocaleDateString()}
          </li>
        ))}
      </ul>
    </section>

    <section>
      <h2>Sections ({sections.length})</h2>
      <ul>
        {sections.map((section) => (
          <li>
            {section.data.type} (order: {section.data.order}, visible: {section.data.visible})
          </li>
        ))}
      </ul>
    </section>

    <section>
      <h2>Events ({events.length})</h2>
      <ul>
        {events.map((event) => (
          <li>
            {event.data.title} ({event.data.lang}) - {event.data.location} - {event.data.date.toLocaleDateString()}
            {event.data.featured && <strong> [Featured]</strong>}
          </li>
        ))}
      </ul>
    </section>

    <section>
      <h2>French Events Only ({frenchEvents.length})</h2>
      <ul>
        {frenchEvents.map((event) => (
          <li>{event.data.title} - {event.data.description}</li>
        ))}
      </ul>
    </section>
  </body>
</html>
