---
import BaseLayout from '@/layouts/BaseLayout.astro';

const lang = 'en';
const title = 'Add a Section - Guide';
const description = 'Guide to create a new section component';

const alternateUrls = {
  fr: '/fr/guides/add-section',
  en: '/en/guides/add-section'
};
---

<BaseLayout title={title} description={description} lang={lang} alternateUrls={alternateUrls}>
  <main class="container mx-auto px-4 py-12 max-w-4xl">
    <h1 class="text-4xl font-bold mb-6">How to add a section</h1>
    <p class="text-lg text-gray-600 mb-12">
      Complete guide to create and document a new reusable section component.
    </p>

    <!-- When to create -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">When to create a new section?</h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
        <div class="bg-green-50 border-l-4 border-green-500 p-4">
          <p class="font-semibold mb-2">‚úì Create a SECTION if:</p>
          <ul class="list-disc pl-6 space-y-1 text-sm">
            <li>Represents a complete functional area of a page</li>
            <li>Contains multiple assembled primitives</li>
            <li>Has specific business logic</li>
            <li>Example: Testimonials gallery, Pricing section, Newsletter signup</li>
          </ul>
        </div>

        <div class="bg-blue-50 border-l-4 border-blue-500 p-4">
          <p class="font-semibold mb-2">‚úì Create a PRIMITIVE if:</p>
          <ul class="list-disc pl-6 space-y-1 text-sm">
            <li>Atomic and reusable component</li>
            <li>Usable in multiple contexts</li>
            <li>No business logic</li>
            <li>Example: Badge, Avatar, Tooltip</li>
          </ul>
        </div>
      </div>

      <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4">
        <p class="font-semibold mb-2">Golden rule:</p>
        <p class="text-sm">If your component assembles multiple primitives to create a cohesive content block ‚Üí Section</p>
      </div>
    </section>

    <!-- Step 1 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Step 1: Create the component</h2>
      <p class="mb-4">
        Create the file in <code class="bg-gray-100 px-1 rounded">src/components/sections/</code>
      </p>

      <h3 class="text-xl font-semibold mb-3">Example: "Testimonials" Section</h3>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto mb-4"><code>src/components/sections/Testimonials.astro</code></pre>

      <p class="text-sm text-gray-600">
        üí° Always use <strong>PascalCase</strong> for the file name.
      </p>
    </section>

    <!-- Step 2 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Step 2: Define props</h2>
      <p class="mb-4">
        Use TypeScript to define a clear Props interface with default values.
      </p>

      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>---
interface Props {'{'}
  title: string;
  subtitle?: string;
  testimonials: Array&lt;{'{'}
    author: string;
    role: string;
    content: string;
    avatar?: string;
    rating?: number;
  {'}'}&gt;;
  layout?: 'grid' | 'carousel';
  columns?: 2 | 3;
  class?: string;
{'}'}

const {'{'}
  title,
  subtitle,
  testimonials,
  layout = 'grid',
  columns = 3,
  class: className = '',
{'}'} = Astro.props;
---</code></pre>

      <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mt-4">
        <p class="font-semibold mb-2">Best practices:</p>
        <ul class="list-disc pl-6 space-y-1 text-sm">
          <li>Always type props with TypeScript</li>
          <li>Provide reasonable default values</li>
          <li>Allow custom classes via <code>class</code></li>
          <li>Use union types for variants (<code>'grid' | 'carousel'</code>)</li>
        </ul>
      </div>
    </section>

    <!-- Step 3 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Step 3: Use SectionLayout (optional)</h2>
      <p class="mb-4">
        SectionLayout provides a standard wrapper for spacing and width.
      </p>

      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>---
import SectionLayout from '@/layouts/SectionLayout.astro';
// ... props ...
---

&lt;SectionLayout class={'{'}className{'}'}&gt;
  &lt;!-- Your section content --&gt;
&lt;/SectionLayout&gt;</code></pre>

      <p class="text-sm text-gray-600 mt-4">
        üí° SectionLayout is optional. Use it for consistency, or create your own structure if needed.
      </p>
    </section>

    <!-- Step 4 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Step 4: Compose with primitives</h2>
      <p class="mb-4">
        Reuse existing primitive components as much as possible.
      </p>

      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>---
import Card from '@/components/primitives/Card.astro';
import Button from '@/components/primitives/Button.astro';

// ... props ...

const gridClasses = {'{'}
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3'
{'}'};
---

&lt;section class={'{'}&#96;py-16 bg-white &#36;{'{'}className{'}'}&#96;{'}'}&gt;
  &lt;div class="container mx-auto px-4 max-w-7xl"&gt;
    &lt;!-- Header --&gt;
    &lt;div class="text-center mb-12"&gt;
      &lt;h2 class="text-4xl font-bold text-brand-primary mb-4"&gt;
        {'{'}title{'}'}
      &lt;/h2&gt;
      {'{'}subtitle &amp;&amp; (
        &lt;p class="text-xl text-gray-600"&gt;{'{'}subtitle{'}'}&lt;/p&gt;
      ){'}'}
    &lt;/div&gt;

    &lt;!-- Testimonials grid --&gt;
    &lt;div class={'{'}&#96;grid &#36;{'{'}gridClasses[columns]{'}'} gap-6&#96;{'}'}&gt;
      {'{'}testimonials.map((testimonial) =&gt; (
        &lt;Card variant="bordered" padding="lg"&gt;
          &lt;p class="text-gray-700 mb-4"&gt;"{'{'}testimonial.content{'}'}"&lt;/p&gt;

          &lt;div class="flex items-center"&gt;
            {'{'}testimonial.avatar &amp;&amp; (
              &lt;img
                src={'{'}testimonial.avatar{'}'}
                alt={'{'}testimonial.author{'}'}
                class="w-12 h-12 rounded-full mr-3"
              /&gt;
            ){'}'}
            &lt;div&gt;
              &lt;p class="font-semibold"&gt;{'{'}testimonial.author{'}'}&lt;/p&gt;
              &lt;p class="text-sm text-gray-600"&gt;{'{'}testimonial.role{'}'}&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/Card&gt;
      )){'}'}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/section&gt;</code></pre>
    </section>

    <!-- Step 5 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Step 5: Add to library</h2>
      <p class="mb-4">
        Create FR and EN documentation pages to reference your new section.
      </p>

      <h3 class="text-xl font-semibold mb-3">Create documentation files</h3>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto mb-4"><code>src/pages/fr/library/sections/testimonials.astro
src/pages/en/library/sections/testimonials.astro</code></pre>

      <h3 class="text-xl font-semibold mb-3">Documentation page structure</h3>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>---
import BaseLayout from '@/layouts/BaseLayout.astro';

const lang = 'en';
const title = 'Testimonials - Sections';
const description = 'Testimonials section documentation';

const alternateUrls = {'{'}
  fr: '/fr/library/sections/testimonials',
  en: '/en/library/sections/testimonials'
{'}'};
---

&lt;BaseLayout title={'{'}title{'}'} description={'{'}description{'}'} lang={'{'}lang{'}'} alternateUrls={'{'}alternateUrls{'}'}&gt;
  &lt;main class="container mx-auto px-4 py-12 max-w-4xl"&gt;
    &lt;h1&gt;Testimonials&lt;/h1&gt;

    &lt;!-- Props table --&gt;
    &lt;section&gt;
      &lt;h2&gt;Props&lt;/h2&gt;
      &lt;table&gt;...&lt;/table&gt;
    &lt;/section&gt;

    &lt;!-- Usage example --&gt;
    &lt;section&gt;
      &lt;h2&gt;Usage example&lt;/h2&gt;
      &lt;pre&gt;&lt;code&gt;...&lt;/code&gt;&lt;/pre&gt;
    &lt;/section&gt;
  &lt;/main&gt;
&lt;/BaseLayout&gt;</code></pre>

      <p class="text-sm text-gray-600 mt-4">
        üí° Check existing pages in <code class="bg-gray-100 px-1 rounded">src/pages/en/library/sections/</code> to see the complete structure.
      </p>
    </section>

    <!-- Step 6 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Step 6: Use in a page</h2>
      <p class="mb-4">
        Import and use your new section in any page.
      </p>

      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Hero from '@/components/sections/Hero.astro';
import Testimonials from '@/components/sections/Testimonials.astro';

const testimonials = [
  {'{'}
    author: "Marie Dupont",
    role: "CEO, TechCorp",
    content: "Excellent service, responsive and professional team!",
    avatar: "/avatars/marie.jpg",
    rating: 5
  {'}'},
  // ... more testimonials
];
---

&lt;BaseLayout {'{'}...props{'}'}&gt;
  &lt;Hero title="Our expertise" /&gt;

  &lt;Testimonials
    title="What our clients say"
    subtitle="Hundreds of satisfied customers"
    testimonials={'{'}testimonials{'}'}
    layout="grid"
    columns={'{'}3{'}'}
  /&gt;
&lt;/BaseLayout&gt;</code></pre>
    </section>

    <!-- Complete example -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Complete example</h2>
      <p class="mb-4">
        Here's the complete code for a simple "Stats" section.
      </p>

      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>---
// src/components/sections/Stats.astro
interface Props {'{'}
  title: string;
  subtitle?: string;
  stats: Array&lt;{'{'}
    value: string;
    label: string;
    icon?: string;
  {'}'}&gt;;
  variant?: 'default' | 'compact';
  class?: string;
{'}'}

const {'{'}
  title,
  subtitle,
  stats,
  variant = 'default',
  class: className = '',
{'}'} = Astro.props;

const isCompact = variant === 'compact';
---

&lt;section class={'{'}&#96;py-16 bg-gray-50 &#36;{'{'}className{'}'}&#96;{'}'}&gt;
  &lt;div class="container mx-auto px-4 max-w-6xl"&gt;
    &lt;div class="text-center mb-12"&gt;
      &lt;h2 class="text-4xl font-bold text-brand-primary mb-4"&gt;
        {'{'}title{'}'}
      &lt;/h2&gt;
      {'{'}subtitle &amp;&amp; (
        &lt;p class="text-xl text-gray-600"&gt;{'{'}subtitle{'}'}&lt;/p&gt;
      ){'}'}
    &lt;/div&gt;

    &lt;div class={'{'}&#96;grid grid-cols-1 md:grid-cols-&#36;{'{'}stats.length{'}'} gap-8&#96;{'}'}&gt;
      {'{'}stats.map((stat) =&gt; (
        &lt;div class="text-center"&gt;
          {'{'}stat.icon &amp;&amp; (
            &lt;div class="text-4xl mb-3"&gt;{'{'}stat.icon{'}'}&lt;/div&gt;
          ){'}'}
          &lt;div class={'{'}isCompact ? 'text-3xl' : 'text-5xl'{'}'} class="font-bold text-brand-accent mb-2"&gt;
            {'{'}stat.value{'}'}
          &lt;/div&gt;
          &lt;div class="text-gray-600"&gt;{'{'}stat.label{'}'}&lt;/div&gt;
        &lt;/div&gt;
      )){'}'}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/section&gt;</code></pre>
    </section>

    <!-- Checklist -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Final checklist</h2>
      <div class="bg-gray-50 p-6 rounded-lg">
        <ul class="space-y-2">
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Component created in <code class="bg-gray-100 px-1 rounded">src/components/sections/</code></span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Props interface defined with TypeScript</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Default values defined for optional props</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Primitives reused when possible (Card, Button, etc.)</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Variants tested (if applicable)</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Documentation pages created (FR + EN)</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Usage example documented with code snippets</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Section added to list in <code class="bg-gray-100 px-1 rounded">src/pages/*/library/sections/index.astro</code></span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Section tested in a real page</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Responsive verified (mobile, tablet, desktop)</span>
          </li>
        </ul>
      </div>
    </section>

    <!-- Navigation -->
    <section>
      <h2 class="text-3xl font-semibold mb-4">Next steps</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <a href="/en/library/sections" class="border rounded-lg p-4 hover:shadow-lg transition">
          <h3 class="font-semibold mb-2">‚Üí View all sections</h3>
          <p class="text-sm text-gray-600">Explore existing sections for inspiration</p>
        </a>
        <a href="/en/library/primitives" class="border rounded-lg p-4 hover:shadow-lg transition">
          <h3 class="font-semibold mb-2">‚Üí View primitives</h3>
          <p class="text-sm text-gray-600">Discover available base components</p>
        </a>
      </div>
    </section>
  </main>
</BaseLayout>
