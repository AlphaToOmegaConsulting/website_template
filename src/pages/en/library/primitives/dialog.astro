---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Dialog from '@/components/primitives/Dialog.astro';
import Button from '@/components/primitives/Button.astro';

const lang = 'en';
const title = 'Dialog - Primitives';
const description = 'Dialog component documentation';

const alternateUrls = {
  fr: '/fr/library/primitives/dialog',
  en: '/en/library/primitives/dialog'
};
---

<BaseLayout title={title} description={description} lang={lang} alternateUrls={alternateUrls}>
  <main class="container mx-auto px-4 py-12 max-w-4xl">
    <h1 class="text-4xl font-bold mb-6">Dialog</h1>
    <p class="text-lg mb-8">Accessible modal dialog with backdrop, focus trap, and outside click closing.</p>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-4">Props</h2>
      <div class="overflow-x-auto">
        <table class="w-full border-collapse border border-gray-300">
          <thead>
            <tr class="bg-gray-100">
              <th class="border border-gray-300 p-3 text-left">Name</th>
              <th class="border border-gray-300 p-3 text-left">Type</th>
              <th class="border border-gray-300 p-3 text-left">Default</th>
              <th class="border border-gray-300 p-3 text-left">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="border border-gray-300 p-3"><code class="text-sm bg-gray-100 px-1 rounded">id</code></td>
              <td class="border border-gray-300 p-3"><code class="text-sm">string</code></td>
              <td class="border border-gray-300 p-3"><em>required</em></td>
              <td class="border border-gray-300 p-3">Unique dialog identifier</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-3"><code class="text-sm bg-gray-100 px-1 rounded">title</code></td>
              <td class="border border-gray-300 p-3"><code class="text-sm">string</code></td>
              <td class="border border-gray-300 p-3"><em>required</em></td>
              <td class="border border-gray-300 p-3">Dialog title</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-3"><code class="text-sm bg-gray-100 px-1 rounded">triggerLabel</code></td>
              <td class="border border-gray-300 p-3"><code class="text-sm">string</code></td>
              <td class="border border-gray-300 p-3"><em>required</em></td>
              <td class="border border-gray-300 p-3">Trigger button text</td>
            </tr>
            <tr>
              <td class="border border-gray-300 p-3"><code class="text-sm bg-gray-100 px-1 rounded">triggerVariant</code></td>
              <td class="border border-gray-300 p-3"><code class="text-sm">'primary' | 'secondary' | 'ghost'</code></td>
              <td class="border border-gray-300 p-3"><code class="text-sm">'primary'</code></td>
              <td class="border border-gray-300 p-3">Button variant</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-4">Basic example</h2>
      <div class="p-6 border border-gray-200 rounded-lg bg-gray-50">
        <Dialog id="example-basic" title="Dialog title" description="This is an optional dialog description." triggerLabel="Open dialog">
          <p class="text-gray-700 mb-4">Dialog content. You can place any content here.</p>
          <Button variant="primary">Main action</Button>
        </Dialog>
      </div>
      <pre class="mt-3 p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>&lt;Dialog id="example" title="Dialog title" triggerLabel="Open dialog"&gt;
  &lt;p&gt;Content&lt;/p&gt;
&lt;/Dialog&gt;</code></pre>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-4">Trigger button variants</h2>
      <div class="p-6 border border-gray-200 rounded-lg bg-gray-50">
        <div class="flex gap-4 flex-wrap">
          <Dialog id="trigger-primary" title="Primary Dialog" triggerLabel="Primary" triggerVariant="primary">
            <p>Content with primary button</p>
          </Dialog>
          <Dialog id="trigger-secondary" title="Secondary Dialog" triggerLabel="Secondary" triggerVariant="secondary">
            <p>Content with secondary button</p>
          </Dialog>
          <Dialog id="trigger-ghost" title="Ghost Dialog" triggerLabel="Ghost" triggerVariant="ghost">
            <p>Content with ghost button</p>
          </Dialog>
        </div>
      </div>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-4">Features</h2>
      <ul class="list-disc pl-6 space-y-2 text-gray-700">
        <li><strong>Semi-transparent backdrop</strong>: black background at 50% opacity</li>
        <li><strong>Outside click closing</strong>: clicking on backdrop closes the dialog</li>
        <li><strong>ESC key closing</strong>: native <code class="text-sm bg-gray-100 px-1 rounded">&lt;dialog&gt;</code> behavior</li>
        <li><strong>Focus trap</strong>: Tab navigation limited to dialog elements</li>
        <li><strong>Auto-focus</strong>: automatic focus on first focusable element</li>
        <li><strong>Close button</strong>: X icon in top-right corner</li>
      </ul>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-4">Accessibility</h2>
      <ul class="list-disc pl-6 space-y-2 text-gray-700">
        <li>Uses native HTML <code class="text-sm bg-gray-100 px-1 rounded">&lt;dialog&gt;</code> element</li>
        <li><code class="text-sm bg-gray-100 px-1 rounded">aria-labelledby</code> attribute linked to title</li>
        <li><code class="text-sm bg-gray-100 px-1 rounded">aria-describedby</code> attribute linked to description (if present)</li>
        <li>Close button with <code class="text-sm bg-gray-100 px-1 rounded">aria-label="Close dialog"</code></li>
        <li>JavaScript focus trap for correct keyboard navigation</li>
      </ul>
    </section>
  </main>
</BaseLayout>
