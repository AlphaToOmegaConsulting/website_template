---
import BaseLayout from '@/layouts/BaseLayout.astro';

const lang = 'fr';
const title = 'Ajouter une page - Guide';
const description = 'Guide √©tape par √©tape pour ajouter une nouvelle page';

const alternateUrls = {
  fr: '/fr/library/guides/add-page',
  en: '/en/library/guides/add-page'
};
---

<BaseLayout title={title} description={description} lang={lang} alternateUrls={alternateUrls}>
  <main class="container mx-auto px-4 py-12 max-w-4xl">
    <a href="/fr/library/guides" class="text-sm text-gray-600 hover:underline mb-4 inline-block">‚Üê Retour aux guides</a>

    <h1 class="text-4xl font-bold mb-6">Comment ajouter une page</h1>
    <p class="text-lg text-gray-600 mb-12">
      Guide pas √† pas pour cr√©er une nouvelle page dans le template Alpha WebCore.
    </p>

    <!-- √âtape 1 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">√âtape 1 : Cr√©er les fichiers de routing</h2>
      <p class="mb-4">
        Dans Alpha WebCore, chaque page doit exister en version FR et EN pour maintenir la coh√©rence multilingue.
      </p>

      <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4">
        <p class="font-semibold mb-2">Exemple : Cr√©er une page "Services"</p>
        <p class="text-sm">Nous allons cr√©er une page accessible via <code>/fr/services</code> et <code>/en/services</code></p>
      </div>

      <h3 class="text-xl font-semibold mb-3">Cr√©er les fichiers</h3>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto mb-4"><code>src/pages/
‚îú‚îÄ‚îÄ fr/
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îî‚îÄ‚îÄ index.astro    # Page FR
‚îî‚îÄ‚îÄ en/
    ‚îî‚îÄ‚îÄ services/
        ‚îî‚îÄ‚îÄ index.astro    # Page EN</code></pre>

      <p class="text-sm text-gray-600">
        üí° Utiliser <code class="bg-gray-100 px-1 rounded">index.astro</code> permet d'avoir des URLs propres sans extension.
      </p>
    </section>

    <!-- √âtape 2 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">√âtape 2 : Structure de base</h2>
      <p class="mb-4">
        Chaque page doit utiliser le <code class="bg-gray-100 px-1 rounded">BaseLayout</code> et d√©finir les m√©tadonn√©es essentielles.
      </p>

      <h3 class="text-xl font-semibold mb-3">Code de d√©part (FR)</h3>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>---
import BaseLayout from '@/layouts/BaseLayout.astro';

const lang = 'fr';
const title = 'Nos Services';
const description = 'D√©couvrez tous nos services professionnels';

const alternateUrls = {
  fr: '/fr/services',
  en: '/en/services'
};
---

&lt;BaseLayout
  title={title}
  description={description}
  lang={lang}
  alternateUrls={alternateUrls}
&gt;
  &lt;main class="container mx-auto px-4 py-12"&gt;
    &lt;h1 class="text-4xl font-bold mb-6"&gt;{title}&lt;/h1&gt;
    
    &lt;!-- Votre contenu ici --&gt;
  &lt;/main&gt;
&lt;/BaseLayout&gt;</code></pre>

      <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mt-4">
        <p class="font-semibold mb-2">Points importants :</p>
        <ul class="list-disc pl-6 space-y-1 text-sm">
          <li><code>lang</code> : 'fr' ou 'en' selon la version</li>
          <li><code>alternateUrls</code> : Liens vers les versions FR/EN pour le SEO et le language switcher</li>
          <li><code>title</code> et <code>description</code> : M√©tadonn√©es SEO</li>
        </ul>
      </div>
    </section>

    <!-- √âtape 3 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">√âtape 3 : Ajouter le contenu</h2>
      <p class="mb-4">
        Vous pouvez utiliser les sections existantes ou cr√©er du HTML personnalis√©.
      </p>

      <h3 class="text-xl font-semibold mb-3">Option A : Utiliser des sections existantes</h3>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto mb-6"><code>---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Hero from '@/components/sections/Hero.astro';
import Features from '@/components/sections/Features.astro';
import CTA from '@/components/sections/CTA.astro';

// ... m√©tadonn√©es ...
---

&lt;BaseLayout {...propsLayout}&gt;
  &lt;Hero
    title="Nos Services"
    subtitle="Solutions professionnelles adapt√©es √† vos besoins"
    variant="centered"
  /&gt;

  &lt;Features
    title="Ce que nous proposons"
    features={[
      {
        title: "Consulting",
        description: "Expertise technique..."
      },
      {
        title: "D√©veloppement",
        description: "Applications sur mesure..."
      }
    ]}
  /&gt;

  &lt;CTA
    title="Besoin d'un devis ?"
    primaryCta={{ label: "Nous contacter", href: "/fr/contact" }}
  /&gt;
&lt;/BaseLayout&gt;</code></pre>

      <h3 class="text-xl font-semibold mb-3 mt-6">Option B : HTML personnalis√©</h3>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>&lt;BaseLayout {...propsLayout}&gt;
  &lt;main class="container mx-auto px-4 py-12 max-w-4xl"&gt;
    &lt;h1 class="text-4xl font-bold mb-6"&gt;{title}&lt;/h1&gt;
    
    &lt;div class="prose prose-lg"&gt;
      &lt;p&gt;Votre contenu personnalis√©...&lt;/p&gt;
      
      &lt;h2&gt;Section 1&lt;/h2&gt;
      &lt;p&gt;...&lt;/p&gt;
      
      &lt;h2&gt;Section 2&lt;/h2&gt;
      &lt;p&gt;...&lt;/p&gt;
    &lt;/div&gt;
  &lt;/main&gt;
&lt;/BaseLayout&gt;</code></pre>
    </section>

    <!-- √âtape 4 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">√âtape 4 : Ajouter la navigation</h2>
      <p class="mb-4">
        Pour que votre nouvelle page soit accessible depuis le menu principal, ajoutez-la au composant Header.
      </p>

      <h3 class="text-xl font-semibold mb-3">Modifier <code>src/components/Header.astro</code></h3>
      <p class="mb-2">Localiser la section de navigation et ajouter votre lien :</p>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto"><code>&lt;!-- Navigation FR --&gt;
{lang === 'fr' && (
  &lt;nav&gt;
    &lt;a href="/fr/"&gt;Accueil&lt;/a&gt;
    &lt;a href="/fr/services"&gt;Services&lt;/a&gt;  {/* ‚Üê Nouveau lien */}
    &lt;a href="/fr/events"&gt;√âv√©nements&lt;/a&gt;
    &lt;a href="/fr/partners"&gt;Partenaires&lt;/a&gt;
  &lt;/nav&gt;
)}

&lt;!-- Navigation EN --&gt;
{lang === 'en' && (
  &lt;nav&gt;
    &lt;a href="/en/"&gt;Home&lt;/a&gt;
    &lt;a href="/en/services"&gt;Services&lt;/a&gt;  {/* ‚Üê Nouveau lien */}
    &lt;a href="/en/events"&gt;Events&lt;/a&gt;
    &lt;a href="/en/partners"&gt;Partners&lt;/a&gt;
  &lt;/nav&gt;
)}</code></pre>

      <div class="bg-green-50 border-l-4 border-green-500 p-4 mt-4">
        <p class="font-semibold mb-2">‚úì Bonne pratique :</p>
        <p class="text-sm">Toujours ajouter le lien dans les deux versions (FR et EN) pour maintenir la coh√©rence.</p>
      </div>
    </section>

    <!-- √âtape 5 -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">√âtape 5 : Tester</h2>
      
      <h3 class="text-xl font-semibold mb-3">1. D√©marrer le serveur de d√©veloppement</h3>
      <pre class="p-4 bg-gray-900 text-white rounded text-sm overflow-x-auto mb-4"><code>npm run dev</code></pre>

      <h3 class="text-xl font-semibold mb-3">2. V√©rifier les URLs</h3>
      <ul class="list-disc pl-6 space-y-2 mb-4">
        <li>Acc√©der √† <code class="bg-gray-100 px-1 rounded">http://localhost:4321/fr/services</code></li>
        <li>Acc√©der √† <code class="bg-gray-100 px-1 rounded">http://localhost:4321/en/services</code></li>
        <li>V√©rifier que le language switcher fonctionne correctement</li>
      </ul>

      <h3 class="text-xl font-semibold mb-3">3. Valider le SEO</h3>
      <p class="mb-2">Inspectez le code source de la page (Ctrl+U) et v√©rifiez :</p>
      <ul class="list-disc pl-6 space-y-1">
        <li>Balise <code class="bg-gray-100 px-1 rounded">&lt;title&gt;</code> correcte</li>
        <li>Meta description pr√©sente</li>
        <li>Liens hreflang pour FR et EN</li>
        <li>Balise <code class="bg-gray-100 px-1 rounded">&lt;html lang="fr"&gt;</code></li>
      </ul>
    </section>

    <!-- Checklist -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Checklist finale</h2>
      <div class="bg-gray-50 p-6 rounded-lg">
        <ul class="space-y-2">
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Fichiers cr√©√©s : <code class="bg-gray-100 px-1 rounded">src/pages/fr/ma-page/index.astro</code> et version EN</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>BaseLayout utilis√© avec toutes les m√©tadonn√©es</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span><code class="bg-gray-100 px-1 rounded">alternateUrls</code> configur√©s (FR et EN)</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Contenu ajout√© (sections ou HTML personnalis√©)</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Navigation mise √† jour dans Header.astro</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Pages test√©es en local (FR et EN)</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>Language switcher fonctionne</span>
          </li>
          <li class="flex items-start">
            <span class="mr-2">‚òê</span>
            <span>SEO v√©rifi√© (title, description, hreflang)</span>
          </li>
        </ul>
      </div>
    </section>

    <!-- Troubleshooting -->
    <section class="mb-12">
      <h2 class="text-3xl font-semibold mb-4">Probl√®mes courants</h2>
      
      <div class="space-y-4">
        <div class="border-l-4 border-red-500 bg-red-50 p-4">
          <h3 class="font-semibold mb-2">404 - Page not found</h3>
          <p class="text-sm mb-2"><strong>Cause possible :</strong> Fichier mal nomm√© ou mal plac√©</p>
          <p class="text-sm"><strong>Solution :</strong> V√©rifier que le fichier est bien <code>index.astro</code> dans le bon dossier</p>
        </div>

        <div class="border-l-4 border-red-500 bg-red-50 p-4">
          <h3 class="font-semibold mb-2">Language switcher ne change pas de page</h3>
          <p class="text-sm mb-2"><strong>Cause possible :</strong> <code>alternateUrls</code> incorrect</p>
          <p class="text-sm"><strong>Solution :</strong> V√©rifier que les URLs correspondent exactement aux chemins des fichiers</p>
        </div>
      </div>
    </section>

    <!-- Navigation -->
    <section>
      <h2 class="text-3xl font-semibold mb-4">Prochaines √©tapes</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <a href="/fr/library/guides/add-section" class="border rounded-lg p-4 hover:shadow-lg transition">
          <h3 class="font-semibold mb-2">‚Üí Ajouter une section</h3>
          <p class="text-sm text-gray-600">Cr√©er un nouveau composant section r√©utilisable</p>
        </a>
        <a href="/fr/library/primitives" class="border rounded-lg p-4 hover:shadow-lg transition">
          <h3 class="font-semibold mb-2">‚Üí Voir les primitives</h3>
          <p class="text-sm text-gray-600">D√©couvrir tous les composants UI disponibles</p>
        </a>
      </div>
    </section>
  </main>
</BaseLayout>
